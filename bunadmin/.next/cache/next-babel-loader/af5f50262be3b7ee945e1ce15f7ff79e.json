{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Volumes/Untitled/GitHub/itanlam/ne/bunadmin/src/layouts/DefaultLayout/LeftMenu/index.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Divider from \"@material-ui/core/Divider\";\nimport NestedList from \"./NestedMenu\";\nimport SettingMenu from \"./SettingMenu\";\nimport rxSubscribe from \"@/utils/database/rxSubscribe\";\nimport { Collection } from \"@/core/menu/collections\";\nimport { ENV } from \"@/utils/config\";\n\nvar LeftMenu = function LeftMenu(_ref) {\n  _s();\n\n  var propsData = _ref.data,\n      offLeftSetting = _ref.offLeftSetting;\n\n  var _useState = useState(propsData || []),\n      data = _useState[0],\n      setData = _useState[1];\n\n  useEffect(function () {\n    if (propsData) return;\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return rxSubscribe({\n                collection: Collection.name,\n                sort: {\n                  rank: \"desc\"\n                },\n                callback: function callback(data) {\n                  setData(data);\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [propsData]);\n  return __jsx(React.Fragment, null, __jsx(NestedList, {\n    data: propsData || data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }), __jsx(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }), !offLeftSetting && ENV.ON_SETTING && __jsx(SettingMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 45\n    }\n  }));\n};\n\n_s(LeftMenu, \"tybaCgjIMwi9V6hmC3Ggu0PW+Xs=\");\n\n_c = LeftMenu;\nexport default LeftMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"LeftMenu\");","map":{"version":3,"sources":["/Volumes/Untitled/GitHub/itanlam/ne/bunadmin/src/layouts/DefaultLayout/LeftMenu/index.tsx"],"names":["React","useEffect","useState","Divider","NestedList","SettingMenu","rxSubscribe","Collection","ENV","LeftMenu","propsData","data","offLeftSetting","setData","collection","name","sort","rank","callback","ON_SETTING"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,SAASC,UAAT,QAA2B,yBAA3B;AAEA,SAASC,GAAT,QAAoB,gBAApB;;AAOA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAAwD;AAAA;;AAAA,MAA/CC,SAA+C,QAArDC,IAAqD;AAAA,MAApCC,cAAoC,QAApCA,cAAoC;;AAAA,kBAC/CV,QAAQ,CAACQ,SAAS,IAAK,EAAf,CADuC;AAAA,MAChEC,IADgE;AAAA,MAC1DE,OAD0D;;AAGvEZ,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIS,SAAJ,EAAe;;AACd,6DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACMJ,WAAW,CAAC;AAChBQ,gBAAAA,UAAU,EAAEP,UAAU,CAACQ,IADP;AAEhBC,gBAAAA,IAAI,EAAE;AAAEC,kBAAAA,IAAI,EAAE;AAAR,iBAFU;AAGhBC,gBAAAA,QAAQ,EAAE,kBAAAP,IAAI,EAAI;AAChBE,kBAAAA,OAAO,CAACF,IAAD,CAAP;AACD;AALe,eAAD,CADjB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AASF,GAXQ,EAWN,CAACD,SAAD,CAXM,CAAT;AAaA,SACE,4BACE,MAAC,UAAD;AAAY,IAAA,IAAI,EAAEA,SAAS,IAAIC,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGG,CAACC,cAAD,IAAmBJ,GAAG,CAACW,UAAvB,IAAqC,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHxC,CADF;AAOD,CAvBD;;GAAMV,Q;;KAAAA,Q;AAyBN,eAAeA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\"\n\nimport Divider from \"@material-ui/core/Divider\"\nimport NestedList from \"./NestedMenu\"\nimport SettingMenu from \"./SettingMenu\"\nimport rxSubscribe from \"@/utils/database/rxSubscribe\"\nimport { Collection } from \"@/core/menu/collections\"\nimport { Type } from \"@/core/menu/types\"\nimport { ENV } from \"@/utils/config\"\n\nexport interface LeftMenuProps {\n  data?: Type[]\n  offLeftSetting?: boolean\n}\n\nconst LeftMenu = ({ data: propsData, offLeftSetting }: LeftMenuProps) => {\n  const [data, setData] = useState(propsData || ([] as Type[]))\n\n  useEffect(() => {\n    if (propsData) return\n    ;(async () => {\n      await rxSubscribe({\n        collection: Collection.name,\n        sort: { rank: \"desc\" },\n        callback: data => {\n          setData(data)\n        }\n      })\n    })()\n  }, [propsData])\n\n  return (\n    <>\n      <NestedList data={propsData || data} />\n      <Divider />\n      {!offLeftSetting && ENV.ON_SETTING && <SettingMenu />}\n    </>\n  )\n}\n\nexport default LeftMenu\n"]},"metadata":{},"sourceType":"module"}