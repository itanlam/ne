{"ast":null,"code":"var _jsxFileName = \"/Volumes/Untitled/GitHub/itanlam/ne/bunadmin/src/core/menu/components/ParentSelect/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport { useStyles } from \"./styles\";\nimport rxDb from \"@/utils/database/rxConnect\";\nimport { Collection } from \"@/core/menu/collections\";\nexport default function ParentSelect({\n  rowData,\n  onChange\n}) {\n  const classes = useStyles();\n  const [option, setOption] = React.useState(rowData.parent);\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  React.useEffect(() => {\n    ;\n\n    (async () => {\n      const db = await rxDb();\n      const query = db[Collection.name].find().where(\"name\").ne(rowData.name).where(\"parent\") // limiting 2 level of the menu\n      .eq(\"\").sort({\n        name: \"asc\"\n      });\n      const data = await query.exec();\n      setData(data);\n    })();\n  }, []);\n  const inputLabel = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    setLabelWidth(inputLabel.current.offsetWidth);\n  }, []);\n\n  const handleChange = event => {\n    setOption(event.target.value);\n    onChange(event.target.value);\n  };\n\n  return __jsx(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(InputLabel, {\n    ref: inputLabel,\n    id: \"common-simple-select-outlined-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Parent Name\"), __jsx(Select, {\n    labelId: \"common-simple-select-outlined-label\",\n    id: \"common-simple-select-outlined\",\n    value: option,\n    onChange: handleChange,\n    labelWidth: labelWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, __jsx(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, __jsx(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"None\")), data.length > 0 && data.map(item => __jsx(MenuItem, {\n    key: item.name,\n    value: item.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, item.name))));\n}","map":{"version":3,"sources":["/Volumes/Untitled/GitHub/itanlam/ne/bunadmin/src/core/menu/components/ParentSelect/index.tsx"],"names":["React","useState","InputLabel","MenuItem","FormControl","Select","useStyles","rxDb","Collection","ParentSelect","rowData","onChange","classes","option","setOption","parent","data","setData","useEffect","db","query","name","find","where","ne","eq","sort","exec","inputLabel","useRef","labelWidth","setLabelWidth","current","offsetWidth","handleChange","event","target","value","formControl","length","map","item"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport InputLabel from \"@material-ui/core/InputLabel\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport FormControl from \"@material-ui/core/FormControl\"\nimport Select from \"@material-ui/core/Select\"\nimport { EditComponentProps } from \"material-table\"\nimport { Type } from \"../../types\"\nimport { useStyles } from \"./styles\"\nimport rxDb from \"@/utils/database/rxConnect\"\nimport { Collection } from \"@/core/menu/collections\"\n\ninterface ParentSelectProps extends EditComponentProps<Type> {}\n\nexport default function ParentSelect({ rowData, onChange }: ParentSelectProps) {\n  const classes = useStyles()\n  const [option, setOption] = React.useState(rowData.parent)\n  const [data, setData]: [Type[], (data: any) => void] = useState([])\n\n  React.useEffect(() => {\n    ;(async () => {\n      const db = await rxDb()\n\n      const query = db[Collection.name]\n        .find()\n        .where(\"name\")\n        .ne(rowData.name)\n        .where(\"parent\") // limiting 2 level of the menu\n        .eq(\"\")\n        .sort({ name: \"asc\" })\n      const data = await query.exec()\n      setData(data)\n    })()\n  }, [])\n\n  const inputLabel = React.useRef<HTMLLabelElement>(null)\n  const [labelWidth, setLabelWidth] = React.useState(0)\n  React.useEffect(() => {\n    setLabelWidth(inputLabel.current!.offsetWidth)\n  }, [])\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setOption(event.target.value as string)\n    onChange(event.target.value)\n  }\n\n  return (\n    <FormControl variant=\"outlined\" className={classes.formControl}>\n      <InputLabel ref={inputLabel} id=\"common-simple-select-outlined-label\">\n        Parent Name\n      </InputLabel>\n      <Select\n        labelId=\"common-simple-select-outlined-label\"\n        id=\"common-simple-select-outlined\"\n        value={option}\n        onChange={handleChange}\n        labelWidth={labelWidth}\n      >\n        <MenuItem value=\"\">\n          <em>None</em>\n        </MenuItem>\n        {data.length > 0 &&\n          data.map(item => (\n            <MenuItem key={item.name} value={item.name}>\n              {item.name}\n            </MenuItem>\n          ))}\n      </Select>\n    </FormControl>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}