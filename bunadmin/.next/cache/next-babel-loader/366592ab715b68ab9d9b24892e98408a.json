{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function fsDownload(content, fileName, contentType) {\n  var a = document.createElement(\"a\");\n  var file = new Blob([JSON.stringify(content, null, 2)], {\n    type: contentType\n  });\n  a.href = URL.createObjectURL(file);\n  a.download = fileName;\n  a.click();\n} // fsDownload(jsonData, 'json.txt', 'text/plain');\n\nexport function fsUpload(_x) {\n  return _fsUpload.apply(this, arguments);\n}\n\nfunction _fsUpload() {\n  _fsUpload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n    var _e$target$files;\n\n    var file, str;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // File object\n            // const fileObj = JSON.parse(e.target.files?.[0])\n            file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n            _context.next = 3;\n            return readAsBinaryString(file);\n\n          case 3:\n            str = _context.sent;\n            return _context.abrupt(\"return\", JSON.parse(str));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fsUpload.apply(this, arguments);\n}\n\nvar readAsBinaryString = function readAsBinaryString(inputFile) {\n  var temporaryFileReader = new FileReader();\n  return new Promise(function (resolve, reject) {\n    temporaryFileReader.onerror = function () {\n      temporaryFileReader.abort();\n      reject(new DOMException(\"Problem parsing input file.\"));\n    };\n\n    temporaryFileReader.onload = function () {\n      resolve(temporaryFileReader.result);\n    }; // @ts-ignore\n\n\n    temporaryFileReader.readAsBinaryString(inputFile);\n  });\n};","map":{"version":3,"sources":["/Volumes/Untitled/GitHub/itanlam/ne/bunadmin/src/utils/scripts/fs.tsx"],"names":["fsDownload","content","fileName","contentType","a","document","createElement","file","Blob","JSON","stringify","type","href","URL","createObjectURL","download","click","fsUpload","e","target","files","readAsBinaryString","str","parse","inputFile","temporaryFileReader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","result"],"mappings":";;AAEA,OAAO,SAASA,UAAT,CACLC,OADK,EAELC,QAFK,EAGLC,WAHK,EAIL;AACA,MAAMC,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAV;AACA,MAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACC,IAAI,CAACC,SAAL,CAAeT,OAAf,EAAwB,IAAxB,EAA8B,CAA9B,CAAD,CAAT,EAA6C;AACxDU,IAAAA,IAAI,EAAER;AADkD,GAA7C,CAAb;AAGAC,EAAAA,CAAC,CAACQ,IAAF,GAASC,GAAG,CAACC,eAAJ,CAAoBP,IAApB,CAAT;AACAH,EAAAA,CAAC,CAACW,QAAF,GAAab,QAAb;AACAE,EAAAA,CAAC,CAACY,KAAF;AACD,C,CACD;;AAEA,gBAAsBC,QAAtB;AAAA;AAAA;;;uEAAO,iBAAwBC,CAAxB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACL;AACA;AAEMX,YAAAA,IAJD,sBAIQW,CAAC,CAACC,MAAF,CAASC,KAJjB,oDAIQ,gBAAiB,CAAjB,CAJR;AAAA;AAAA,mBAKaC,kBAAkB,CAACd,IAAD,CAL/B;;AAAA;AAKCe,YAAAA,GALD;AAAA,6CAOEb,IAAI,CAACc,KAAL,CAAWD,GAAX,CAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAUP,IAAMD,kBAAkB,GAAG,SAArBA,kBAAqB,CAACG,SAAD,EAAiC;AAC1D,MAAMC,mBAAmB,GAAG,IAAIC,UAAJ,EAA5B;AAEA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCJ,IAAAA,mBAAmB,CAACK,OAApB,GAA8B,YAAM;AAClCL,MAAAA,mBAAmB,CAACM,KAApB;AACAF,MAAAA,MAAM,CAAC,IAAIG,YAAJ,CAAiB,6BAAjB,CAAD,CAAN;AACD,KAHD;;AAKAP,IAAAA,mBAAmB,CAACQ,MAApB,GAA6B,YAAM;AACjCL,MAAAA,OAAO,CAACH,mBAAmB,CAACS,MAArB,CAAP;AACD,KAFD,CANsC,CAStC;;;AACAT,IAAAA,mBAAmB,CAACJ,kBAApB,CAAuCG,SAAvC;AACD,GAXM,CAAP;AAYD,CAfD","sourcesContent":["import React from \"react\"\n\nexport function fsDownload(\n  content: object | object[],\n  fileName: string,\n  contentType: string\n) {\n  const a = document.createElement(\"a\")\n  const file = new Blob([JSON.stringify(content, null, 2)], {\n    type: contentType\n  })\n  a.href = URL.createObjectURL(file)\n  a.download = fileName\n  a.click()\n}\n// fsDownload(jsonData, 'json.txt', 'text/plain');\n\nexport async function fsUpload(e: React.ChangeEvent<HTMLInputElement>) {\n  // File object\n  // const fileObj = JSON.parse(e.target.files?.[0])\n\n  const file = e.target.files?.[0]\n  const str = await readAsBinaryString(file)\n\n  return JSON.parse(str as string)\n}\n\nconst readAsBinaryString = (inputFile: File | undefined) => {\n  const temporaryFileReader = new FileReader()\n\n  return new Promise((resolve, reject) => {\n    temporaryFileReader.onerror = () => {\n      temporaryFileReader.abort()\n      reject(new DOMException(\"Problem parsing input file.\"))\n    }\n\n    temporaryFileReader.onload = () => {\n      resolve(temporaryFileReader.result)\n    }\n    // @ts-ignore\n    temporaryFileReader.readAsBinaryString(inputFile)\n  })\n}\n"]},"metadata":{},"sourceType":"module"}